sap.ui.define(["sap/ui/core/mvc/Controller"], function(Controller) {
	"use strict";
	return Controller.extend("ui5.ui5.controller.View1", {
		onInit: function() {

		},
		/**
		 *@memberOf ui5.ui5.controller.View1
		 */
		onButton: function(oEvent) {
			// This code was generated by the layout editor.
			var fileUploader = this.getView().byId("fileUploader");
			var domRef = fileUploader.getFocusDomRef();
			var file = domRef.files[0];
			var fileName = file.name;

			var formData = new FormData();
			formData.append("files", file, fileName);
			// formData.append("name", fileName);
			// formData.append("options", optionsStringy);

			var optionList = this.getView().byId("optionList");
			var selectedOption = optionList.getSelectedKey();
			$.ajax({
				url: '/node/leonardo/url',
				timeout: 3600000,
				// 'Accept': 'application/json',
				// 'Accept' : 'multipart/form-data',
				type: 'post',
				processData: false,
				contentType: false,
				data: JSON.stringify(formData),
				success: (data) => {
					console.log("[SUCCESS]", data);
					for (let [key, value] of formData.entries()) {
						console.log(key, value);
					}
				},
				error: (err) => {
					console.error("[ERROR]", err);
				}
			});
		}
	});
});